{"version":3,"file":"index.js","sources":["../src/lib/Util.js","../src/lib/TrashIcon.js","../src/lib/Spline.js","../src/lib/NodeInputListItem.js","../src/lib/NodeInput.js","../src/lib/NodeOutputListItem.js","../src/lib/NodeOutputList.js","../src/lib/Node.js","../src/index.js"],"sourcesContent":["/* not bound to style, should be computed */\r\n\r\nexport function computeInOffsetByIndex(x,y,index) {\r\n\tlet outx = x + 15;\r\n\tlet outy = y + 47 + (index * 20);\r\n\r\n\treturn {x:outx, y:outy};\r\n}\r\n\r\nexport function computeOutOffsetByIndex(x,y,index) {\r\n\r\n\tlet outx = x + 166;\r\n\tlet outy = y + 49 + (index * 22);\r\n\r\n\treturn {x:outx, y:outy};\r\n\r\n}","import React from 'react';\r\n\r\nexport const TrashIcon = ({\r\n    onClick,\r\n    position\r\n}) => {\r\n    const handleClick = e => {\r\n        if (onClick) {\r\n            onClick(e);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <g className={\"trash-icon\"} fill={\"none\"} stroke={\"none\"} strokeWidth={\"1\"}\r\n           transform={`translate(${position.x - 6},${position.y + 15})`}\r\n           onClick={handleClick}\r\n        >\r\n            <circle className={\"trash-icon-bg\"} cx={7} cy={7} r={\"14\"} fill={\"#337AB7\"} />\r\n            <g className={\"trash-icon-trashcan\"} fill={\"#FFFFFF\"} transform={\"translate(-336.00000, -192.000000)\"}>\r\n                <path d=\"M347.999959,195 L350,195 L350,196 L349,196 L349,207.001498 C349,207.552511 348.554265,208 348.004423,208 L338.995577,208 C338.444837,208 338,207.552955 338,207.001498 L338,196 L337,196 L337,195 L338.995577,195 L339.000042,195 L339,194.990631 L339,193.009369 C339,192.443353 339.446616,192 339.997545,192 L347.002455,192 C347.553689,192 348,192.45191 348,193.009369 L348,194.990631 Z M340,194 L340,195 L347,195 L347,194 C347,193.447715 346.552285,193 346,193 L341,193 C340.447715,193 340,193.447715 340,194 Z M339,196 L339,207 L348,207 L348,196 Z M341,197 L342,197 L342,206 L341,206 Z M343,197 L344,197 L344,206 L343,206 Z M345,197 L345,206 L346,206 L346,197 L345,197 Z M345,197\" id=\"Rectangle 159\"/>\r\n            </g>\r\n        </g>\r\n    );\r\n}","import React, { useState } from 'react';\r\nimport onClickOutside from 'react-onclickoutside';\r\n\r\nimport { TrashIcon } from './TrashIcon';\r\n\r\nconst Spline = ({\r\n    mousePos,\r\n    onClick,\r\n    onClickOutside,\r\n    onRemove,\r\n    end,\r\n    start\r\n}) => {\r\n    const [selected, setSelected] = useState(false);\r\n    const [position, setPosition] = useState({ x: 0, y: 0 });\r\n\r\n    const bezierCurve = (a, b, cp1x, cp1y, cp2x, cp2y, x, y) => {\r\n        return `M ${a} ${b} C ${cp1x} ${cp1y} ${cp2x} ${cp2y} ${x} ${y}`;\r\n    }\r\n\r\n    const distance = (a, b) => {\r\n        return Math.sqrt(\r\n            (b[0] - a[0]) * (b[0] - a[0]) + (b[1] - a[1]) * (b[1] - a[1])\r\n        )\r\n    }\r\n\r\n    const handleClick = e => {\r\n        setSelected(old => !old);\r\n        setPosition(old => {\r\n            return {...old, ...mousePos}\r\n        });\r\n\r\n        if (onClick) {\r\n            onClick(e);\r\n        }\r\n    }\r\n\r\n    Spline.handleClickOutside = e => {\r\n        setSelected(false);\r\n\r\n        if (onClickOutside) {\r\n            onClickOutside(e);\r\n        }\r\n    }\r\n\r\n    const handleRemove = e => {\r\n        setSelected(false);\r\n\r\n        if (onRemove) {\r\n            onRemove(e);\r\n        }\r\n    }\r\n\r\n    let dist = distance(\r\n                [start.x, start.y],\r\n                [end.x, end.y]);\r\n    let pathString = bezierCurve(start.x,\r\n                                 start.y,\r\n                                 start.x + dist * 0.25,\r\n                                 start.y,\r\n                                 end.x - dist * 0.75,\r\n                                 end.y,\r\n                                 end.x,\r\n                                 end.y);\r\n    let className = `connector ${selected ? ' selected' : ''}`;\r\n\r\n    return (\r\n        <g>\r\n            <circle cx={start.x} cy={start.y} r={\"3\"} fill={\"#337ab7\"} />\r\n            <circle cx={end.x} cy={end.y} r={\"3\"} fill={\"#9191A8\"} />\r\n            <path className={\"connector-click-area\"} d={pathString} onClick={handleClick} />\r\n            <path className={className} d={pathString} onClick={handleClick} />\r\n            { selected ?\r\n                <TrashIcon position={position}\r\n                           onClick={handleRemove}\r\n                />    \r\n            : null }\r\n        </g>\r\n    );\r\n}\r\n\r\nconst handleClickConfig = {\r\n    handleClickOutside: () => Spline.handleClickOutside\r\n}\r\n\r\nexport default onClickOutside(Spline, handleClickConfig);","import React, { useState } from 'react';\r\n\r\nexport const NodeInputListItem = ({\r\n    onMouseUp,\r\n    index,\r\n    item\r\n}) => {\r\n    const [hover, setHover] = useState(false);\r\n\r\n    const handleOnMouseUp = e => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n\r\n        onMouseUp(index);\r\n    }\r\n\r\n    const onMouseOver = () => {\r\n        setHover(true);\r\n    }\r\n\r\n    const onMouseOut = () => {\r\n        setHover(false);\r\n    }\r\n\r\n    const noop = e => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    return (\r\n        <li>\r\n            <a onClick={noop} onMouseUp={handleOnMouseUp} href={\"#\"}>\r\n                <i className={hover ? 'fa fa-circle-o hover' : 'fa fa-circle-o'}\r\n                   onMouseOver={onMouseOver}\r\n                   onMouseOut={onMouseOut}\r\n                ></i>\r\n                { item.name }\r\n            </a>\r\n        </li>\r\n    );\r\n}","import React from 'react';\r\n\r\nimport { NodeInputListItem } from './NodeInputListItem';\r\n\r\nexport const NodeInputList = ({\r\n    items,\r\n    onCompleteConnector\r\n}) => {\r\n    const onMouseUp = i => {\r\n        onCompleteConnector(i);\r\n    }\r\n\r\n    let i = 0;\r\n\r\n    return (\r\n        <div className={\"nodeInputWrapper\"}>\r\n            <ul className={\"nodeInputList\"}>\r\n                {items.map(item => {\r\n                    return <NodeInputListItem\r\n                                onMouseUp={i => onMouseUp(i)}\r\n                                key={i}\r\n                                index={i++}\r\n                                item={item}/>\r\n                })}\r\n            </ul>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\n\r\nexport const NodeOutputListItem = ({\r\n    onMouseDown,\r\n    index,\r\n    item\r\n}) => {\r\n    const handleOnMouseDown = e => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n\r\n        onMouseDown(index);\r\n    }\r\n\r\n    const noop = e => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    return (\r\n        <li onMouseDown={handleOnMouseDown}>\r\n            <a href={\"#\"} onClick={noop}>\r\n                { item.name }\r\n                <i className={\"fa fa-circle-o\"}></i>\r\n            </a>\r\n        </li>\r\n    )\r\n}","import React from 'react';\r\n\r\nimport { NodeOutputListItem } from './NodeOutputListItem';\r\n\r\nexport const NodeOutputList = ({\r\n    onStartConnector,\r\n    items\r\n}) => {\r\n    const onMouseDown = i => {\r\n        onStartConnector(i);\r\n    }\r\n\r\n    let i = 0;\r\n\r\n    return (\r\n        <div className={\"nodeOutputWrapper\"}>\r\n            <ul className={\"nodeOutputList\"}>\r\n                {items.map(item => {\r\n                    return <NodeOutputListItem \r\n                                onMouseDown={i => onMouseDown(i)}\r\n                                key={i}\r\n                                index={i++}\r\n                                item={item} />\r\n                })}\r\n            </ul>\r\n        </div>\r\n    );\r\n}","import React, { useState } from 'react';\r\nimport onClickOutside from 'react-onclickoutside';\r\nimport Draggable from 'react-draggable';\r\n\r\nimport { NodeInputList } from './NodeInput';\r\nimport { NodeOutputList } from './NodeOutputList';\r\n\r\nconst DragNode = ({ \r\n    onNodeDeselect,\r\n    onNodeSelect,\r\n    onNodeStart,\r\n    onNodeStop,\r\n    onNodeMove,\r\n    onStartConnector,\r\n    onCompleteConnector,\r\n    index,\r\n    inputs,\r\n    outputs,\r\n    nid,\r\n    pos,\r\n    title\r\n}) => {\r\n    const [selected, setSelected] = useState(false);\r\n\r\n    const handleDragStart = (eve, ui) => {\r\n        onNodeStart(nid, ui);\r\n    }\r\n\r\n    const handleDragStop = (eve, ui) => {\r\n        onNodeStop(nid, {x: ui.x, y: ui.y});\r\n    }\r\n\r\n    const handleDrag = (eve, ui) => {\r\n        // console.log(ui);\r\n        onNodeMove(index, {x: ui.x, y: ui.y});\r\n    }\r\n\r\n    const handleOnStartConnector = idx => {\r\n        onStartConnector(nid, idx);\r\n    }\r\n\r\n    const handleOnCompleteConnector = idx => {\r\n        onCompleteConnector(nid, idx);\r\n    }\r\n\r\n    const handleClick = e => {\r\n        setSelected(true);\r\n        if (onNodeSelect) {\r\n            onNodeSelect(nid);\r\n        }\r\n    }\r\n\r\n    DragNode.handleClickOutside = () => {\r\n        if (onNodeDeselect && selected) {\r\n            onNodeDeselect(nid);\r\n        }\r\n        setSelected(false);\r\n    }\r\n\r\n    let nodeClass = `node ${selected ? ' selected' : ''}`\r\n\r\n    return (\r\n        <div onDoubleClick={e => handleClick(e)}>\r\n            <Draggable\r\n                position={{ x: pos.x, y: pos.y }}\r\n                handle={\".node-header\"}\r\n                onStart={(eve, ui) => handleDragStart(eve, ui)}\r\n                onStop={(eve, ui) => handleDragStop(eve, ui)}\r\n                onDrag={(eve, ui) => handleDrag(eve, ui)}>\r\n                <section className={nodeClass} style={{zIndex: 10000}}>\r\n                    <header className={\"node-header\"}>\r\n                        <span className={\"node-title\"}>{title}</span>\r\n                    </header>\r\n                    <div className={\"node-content\"}>\r\n                        <NodeInputList \r\n                            items={inputs}\r\n                            onCompleteConnector={idx => handleOnCompleteConnector(idx)} />\r\n                        <NodeOutputList\r\n                            items={outputs}\r\n                            onStartConnector={idx => handleOnStartConnector(idx)} />\r\n                    </div>\r\n                </section>\r\n            </Draggable>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst handleClickConfig = {\r\n    handleClickOutside: () => DragNode.handleClickOutside\r\n}\r\n\r\nexport default onClickOutside(DragNode, handleClickConfig);","import React, { useState, useRef } from 'react';\r\nimport { computeOutOffsetByIndex, computeInOffsetByIndex } from './lib/Util';\r\n// import { SVGComponent } from './lib-hooks/svgComp-hooks';\r\nimport Spline from './lib/Spline';\r\nimport DragNode from './lib/Node';\r\n\r\nexport const ReactNodeGraphHook = ({\r\n    data,\r\n    setData,\r\n    onNodeDeselect,\r\n    onNodeMove,\r\n    onNodeStartMove,\r\n    onNodeSelect,\r\n    onNewConnector,\r\n    onRemoveConnector\r\n}) => {\r\n    const [source, setSource] = useState([]);\r\n    const [dragging, setDragging] = useState(false);\r\n    const [mousePos, setMousePos] = useState({x: 0, y: 0});\r\n\r\n    const svgRef = useRef();\r\n\r\n    const onMouseMove = e => {\r\n        let [pX, pY] = [e.clientX, e.clientY];\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n\r\n        const svgRect = svgRef.current.getBoundingClientRect();\r\n        // console.log(svgRect);\r\n        setMousePos(old => {\r\n            return {\r\n                ...old,\r\n                ...{x: pX - svgRect.left, y: pY - svgRect.top}\r\n            }\r\n        });\r\n    }\r\n\r\n    const onMouseUp = e => {\r\n        setDragging(false);\r\n    }\r\n\r\n    const handleNodeStart = nid => {\r\n        onNodeStartMove(nid);\r\n    }\r\n\r\n    const handleNodeStop = (nid, pos) => {\r\n        onNodeMove(nid, pos);\r\n    }\r\n\r\n    const handleNodeMove = (idx, pos) => {\r\n        let dataT = data;\r\n        dataT.nodes[idx].x = pos.x;\r\n        dataT.nodes[idx].y = pos.y;\r\n\r\n        // console.log(dataT);\r\n        // console.log({...data,...dataT});\r\n        setData(old => {\r\n            return {\r\n                ...old, \r\n                ...dataT\r\n            }\r\n        });\r\n    }\r\n\r\n    const handleStartConnector = (nid, outputIdx) => {\r\n        let newSrc = [nid, outputIdx];\r\n\r\n        setDragging(true);\r\n        setSource(newSrc); // Not sure if this will work...\r\n    }\r\n\r\n    const handleCompleteConnector = (nid, inputIdx) => {\r\n        if (dragging) {\r\n            let fromNode = getNodeById(data.nodes, source[0]);\r\n            let fromPinName = fromNode.fields.out[source[1]].name;\r\n            let toNode = getNodeById(data.nodes, nid);\r\n            let toPinName = toNode.fields.in[inputIdx].name;\r\n\r\n            onNewConnector(fromNode.nid, fromPinName, toNode.nid, toPinName);\r\n        }\r\n        setDragging(false);\r\n    }\r\n\r\n    const handleRemoveConnector = connector => {\r\n        if (onRemoveConnector) {\r\n            onRemoveConnector(connector);\r\n        }\r\n    }\r\n\r\n    const handleNodeSelect = nid => {\r\n        if (onNodeSelect) {\r\n            onNodeSelect(nid);\r\n        }\r\n    }\r\n\r\n    const handleNodeDeselect = nid => {\r\n        if (onNodeDeselect) {\r\n            onNodeDeselect(nid);\r\n        }\r\n    }\r\n\r\n    const computePinIdxfromLabel = (pins, pinLabel) => {\r\n        let reval = 0;\r\n\r\n        for (let pin of pins) {\r\n            if (pin.name === pinLabel) {\r\n                return reval;\r\n            } else {\r\n                reval++;\r\n            }\r\n        }\r\n    }\r\n\r\n    const getNodeById = (nodes, nid) => {\r\n        let reval = 0;\r\n\r\n        for(const node of nodes) {\r\n            if (node.nid === nid) {\r\n                return nodes[reval];\r\n            } else {\r\n                reval++;\r\n            }\r\n        }\r\n    }\r\n\r\n    let newConn = null;\r\n    let i = 0;\r\n\r\n    // console.log(dragging);\r\n    if (dragging) {\r\n        let sourceNode = getNodeById(data.nodes, source[0]);\r\n        let connectorStart = computeOutOffsetByIndex(sourceNode.x, sourceNode.y, source[1]);\r\n        let connectorEnd = {\r\n            x: mousePos.x,\r\n            y: mousePos.y\r\n        };\r\n\r\n        // console.log(mousePos);\r\n        newConn = <Spline\r\n                    start={connectorStart}\r\n                    end={connectorEnd}\r\n                  />\r\n    }\r\n\r\n    let splineIdx = 0;\r\n\r\n    return (\r\n        <div className={dragging ? 'dragging' : ''} \r\n              onMouseMove={onMouseMove}\r\n              onMouseUp={onMouseUp}\r\n        >\r\n            {data.nodes.map(node => {\r\n                // console.log(node);\r\n                return <DragNode\r\n                            index={i++}\r\n                            nid={node.nid}\r\n                            title={node.type}\r\n                            inputs={node.fields.in}\r\n                            outputs={node.fields.out}\r\n                            pos={{x: node.x, y: node.y}}\r\n                            key={node.nid}\r\n\r\n                            onNodeStart={nid => handleNodeStart(nid)}\r\n                            onNodeStop={(nid, pos) => handleNodeStop(nid, pos)}\r\n                            onNodeMove={(idx, pos) => handleNodeMove(idx, pos)}\r\n\r\n                            onStartConnector={(nid, outputIdx) => handleStartConnector(nid, outputIdx)}\r\n                            onCompleteConnector={(nid, inputIdx) => handleCompleteConnector(nid, inputIdx)}\r\n\r\n                            onNodeSelect={nid => handleNodeSelect(nid)}\r\n                            onNodeDeselect={nid => handleNodeDeselect(nid)}\r\n                       />\r\n            })}\r\n            <svg style={{position: 'absolute', height: \"100%\", width: \"100%\", zIndex: 9000}} \r\n                 ref={svgRef}>\r\n                {data.connections.map(connector => {\r\n                    // console.log(data);\r\n                    // console.log(connector);\r\n                    let fromNode = getNodeById(data.nodes, connector.from_node);\r\n                    let toNode = getNodeById(data.nodes, connector.to_node);\r\n\r\n                    let splinestart = computeOutOffsetByIndex(fromNode.x, fromNode.y, computePinIdxfromLabel(fromNode.fields.out, connector.from));\r\n                    let splineend = computeInOffsetByIndex(toNode.x, toNode.y, computePinIdxfromLabel(toNode.fields.in, connector.to));\r\n\r\n                    return <Spline\r\n                            start={splinestart}\r\n                            end={splineend}\r\n                            key={splineIdx++}\r\n                            mousePos={mousePos}\r\n                            onRemove={() => handleRemoveConnector(connector)}\r\n                    />\r\n                })}\r\n                {newConn}\r\n            </svg>\r\n        </div>\r\n    );\r\n}"],"names":["computeInOffsetByIndex","x","y","index","outx","outy","computeOutOffsetByIndex","TrashIcon","onClick","position","handleClick","e","React","Spline","mousePos","onClickOutside","onRemove","end","start","useState","selected","setSelected","setPosition","bezierCurve","a","b","cp1x","cp1y","cp2x","cp2y","distance","Math","sqrt","old","handleClickOutside","handleRemove","dist","pathString","className","handleClickConfig","NodeInputListItem","onMouseUp","item","hover","setHover","handleOnMouseUp","stopPropagation","preventDefault","onMouseOver","onMouseOut","noop","name","NodeInputList","items","onCompleteConnector","i","map","NodeOutputListItem","onMouseDown","handleOnMouseDown","NodeOutputList","onStartConnector","DragNode","onNodeDeselect","onNodeSelect","onNodeStart","onNodeStop","onNodeMove","inputs","outputs","nid","pos","title","handleDragStart","eve","ui","handleDragStop","handleDrag","handleOnStartConnector","idx","handleOnCompleteConnector","nodeClass","zIndex","ReactNodeGraphHook","data","setData","onNodeStartMove","onNewConnector","onRemoveConnector","source","setSource","dragging","setDragging","setMousePos","svgRef","useRef","onMouseMove","clientX","clientY","pX","pY","svgRect","current","getBoundingClientRect","left","top","handleNodeStart","handleNodeStop","handleNodeMove","dataT","nodes","handleStartConnector","outputIdx","newSrc","handleCompleteConnector","inputIdx","fromNode","getNodeById","fromPinName","fields","out","toNode","toPinName","handleRemoveConnector","connector","handleNodeSelect","handleNodeDeselect","computePinIdxfromLabel","pins","pinLabel","reval","pin","node","newConn","sourceNode","connectorStart","connectorEnd","splineIdx","type","height","width","connections","from_node","to_node","splinestart","from","splineend","to"],"mappings":"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"}